<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Customer Registration Form</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>

    <style>
        /* Base .cbtn styling */
.cbtn {
    padding: 10px 24px;
    font-size: 16px;
    font-weight: 600;
    color: #fff;
    background-color: #0056D6;
    border: none;
    border-radius: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    outline: none;
}

/* Hover effect */
.cbtn:hover {
    background-color: #0041a8; /* Darker shade on hover */
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15); /* Slightly larger shadow on hover */
    transform: translateY(-2px); /* Slight lift effect */
}

/* Active (click) effect */
.cbtn:active {
    background-color: #003080; /* Even darker shade on click */
    box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2); /* Smaller shadow on click */
    transform: translateY(0); /* Reset lift effect */
}

/* Disabled .cbtn styling */
.cbtn:disabled {
    background-color: #cccccc; /* Grayed out */
    color: #666666; /* Dimmed text */
    cursor: not-allowed; /* Change cursor to indicate disabled state */
    box-shadow: none; /* Remove shadow */
    transform: none; /* Remove any lift effect */
}

/* Secondary .cbtn styling */
.cbtn.secondary {
    background-color: #6c757d; /* Gray color for secondary buttons */
}

.cbtn.secondary:hover {
    background-color: #5a6268; /* Darker gray on hover */
}

/* Success .cbtn styling */
.cbtn.success {
    background-color: #28a745; /* Green color for success buttons */
}

.cbtn.success:hover {
    background-color: #218838; /* Darker green on hover */
}

/* Danger .cbtn styling */
.cbtn.danger {
    background-color: #dc3545; /* Red color for danger buttons */
}

.cbtn.danger:hover {
    background-color: #c82333; /* Darker red on hover */
}

/* Outline .cbtn styling */
.cbtn.outline {
    background-color: transparent;
    border: 2px solid #0056D6; /* Border color matches primary color */
    color: #0056D6; /* Text color matches primary color */
}

.cbtn.outline:hover {
    background-color: #0056D6; /* Fill with primary color on hover */
    color: #fff; /* Text color changes to white */
}

/* Icon .cbtn styling */
.cbtn.icon {
    display: inline-flex;
    align-items: center;
    gap: 8px; /* Space between icon and text */
    padding: 10px 20px;
}

.cbtn.icon i {
    font-size: 18px; /* Adjust icon size */
}

/* Small .cbtn styling */
.cbtn.small {
    padding: 8px 16px;
    font-size: 14px;
}

/* Large .cbtn styling */
.cbtn.large {
    padding: 16px 32px;
    font-size: 18px;
}


/* modal */
.modal-content {
    position: relative;
    display: flex
;
    flex-direction: column;
    width: 100%;
    color: var(--bs-modal-color);
    pointer-events: auto;
    background-color: var(--bs-modal-bg);
    background-clip: padding-box;
    border: var(--bs-modal-border-width) solid var(--bs-modal-border-color);
    border-radius: 32px;
    outline: 0;
    padding: 20px;
}
.modal-body{
    font-size: 24px;
    text-align: center;
}
 /* Container to control the size of the cropped image */
 .logo-container {
    height: 150px; /* Set the desired height (cropped height) */
    overflow: hidden; /* Hide the excess parts of the image */
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Image styling */
.logo-container img {
    width: 100%; /* Make the image fill the container width */
    height: auto; /* Maintain aspect ratio */
    object-fit: cover; /* Crop the image to fit the container */
    object-position: center; /* Focus on the center of the image */
}
    </style>
    <style>
        .container {
            max-width: 900px;
            margin: 50px auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .logo {
            display: block;
            margin: 0 auto 20px;
            max-width: 450px;
        }

        .form-group-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .form-group {
            flex: 1 1 calc(50% - 10px);
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: bold;
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #0056D6;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #003f9e;
        }

        @media (max-width: 600px) {
            .form-group {
                flex: 1 1 100%;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Message Box for Results (Hidden by default) -->
        <div class="text-center mb-5">
            <div class="logo-container">
                <img src="http://americanapd.com/wp-content/uploads/2025/01/APD-Logo-Vector-Source-01.png" alt="APD Logo" class="logo">
            </div>
            <h3>Register as a New Customer</h3>
            <hr />
        </div>

        <form id="registrationForm" action="http://127.0.0.1:5000/submit-registration" method="POST" enctype="multipart/form-data">

            <!-- Business Type -->
            <div class="form-group-container">
                <div class="form-group">
                    <label for="businessType">*Business Type</label>
                    <select id="businessType" name="businessType" required>
                        <option value="" disabled selected>Select your business type</option>
                        <option value="Pharmacy - Independent">Pharmacy - Independent</option>
                        <option value="Pharmacy - Chain">Pharmacy - Chain</option>
                        <option value="LTC Pharmacy">LTC Pharmacy</option>
                        <option value="Clinic">Clinic</option>
                        <option value="Hospital">Hospital</option>
                        <option value="Wholesaler">Wholesaler</option>
                        <option value="Repackager">Repackager</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="companyName">*Company Name</label>
                    <input type="text" id="companyName" name="companyName" placeholder="Enter company name" required>
                </div>
            </div>
        
            <!-- Company Information -->
            <div class="form-group-container">
                <div class="form-group">
                    <label for="dbaName">D.B.A Name (If Applicable)</label>
                    <input type="text" id="dbaName" name="dbaName" placeholder="Enter D.B.A name">
                </div>
                <div class="form-group">
                    <label for="gln">GLN (Global Location Number)</label>
                    <input type="text" id="gln" name="gln" placeholder="Enter GLN">
                </div>
            </div>
        
            <!-- Shipping Information -->
            <div class="form-group-container">
                <div class="form-group">
                    <label for="shippingAddress">*Shipping Street</label>
                    <input type="text" id="shippingAddress" name="shippingAddress" placeholder="Enter shipping street" required>
                </div>
                <div class="form-group">
                    <label for="shippingSuite">Suite (If Applicable)</label>
                    <input type="text" id="shippingSuite" name="shippingSuite" placeholder="Enter suite number">
                </div>
                <div class="form-group">
                    <label for="shippingCity">*Shipping City</label>
                    <input type="text" id="shippingCity" name="shippingCity" placeholder="Enter shipping city" required>
                </div>
                <div class="form-group">
                    <label for="shippingState">*Shipping State</label>
                    <input type="text" id="shippingState" name="shippingState" placeholder="Enter shipping state" required>
                </div>
                <div class="form-group">
                    <label for="shippingZip">*Shipping Zip</label>
                    <input type="text" id="shippingZip" name="shippingZip" placeholder="Enter shipping zip code" required title="Enter a valid 5-digit zip code">
                </div>
            </div>
        
            <!-- Contact Information -->
            <div class="form-group-container">
                <div class="form-group">
                    <label for="phone">*Phone</label>
                    <input type="text" id="phone" name="phone" placeholder="Enter phone number" required  title="Enter a 10-digit phone number">
                </div>
                <div class="form-group">
                    <label for="fax">Fax</label>
                    <input type="text" id="fax" name="fax" placeholder="Enter fax number">
                </div>
                <div class="form-group">
                    <label for="email">*Email</label>
                    <input type="email" id="email" name="email" placeholder="Enter email address" required>
                </div>
            </div>
        
            <!-- Billing Information -->
            <div class="form-group-container">
                <div class="form-group">
                    <label for="billingSameAsShipping">Billing Same as Shipping?</label>
                    <select id="billingSameAsShipping" name="billingSameAsShipping">
                        <option value="yes">Yes</option>
                        <option value="no" selected>No</option>
                    </select>
                </div>
            </div>
            <div id="billingFields" class="form-group-container">
                <div class="form-group">
                    <label for="billingAddress">Billing Street</label>
                    <input type="text" id="billingAddress" name="billingAddress" placeholder="Enter billing street">
                </div>
                <div class="form-group">
                    <label for="billingSuite">Suite</label>
                    <input type="text" id="billingSuite" name="billingSuite" placeholder="Enter suite number">
                </div>
                <div class="form-group">
                    <label for="billingCity">Billing City</label>
                    <input type="text" id="billingCity" name="billingCity" placeholder="Enter billing city">
                </div>
                <div class="form-group">
                    <label for="billingState">Billing State</label>
                    <input type="text" id="billingState" name="billingState" placeholder="Enter billing state">
                </div>
                <div class="form-group">
                    <label for="billingZip">Billing Zip</label>
                    <input type="text" id="billingZip" name="billingZip" placeholder="Enter billing zip code">
                </div>
            </div>
        
            <!-- Ownership Information -->
            <div class="form-group-container">
                <div class="form-group">
                    <label for="ownerName">*Owner Name</label>
                    <input type="text" id="ownerName" name="ownerName" placeholder="Enter owner name" required>
                </div>
                <div class="form-group">
                    <label for="secondOwnerName">2nd Owner Name (If Applicable)</label>
                    <input type="text" id="secondOwnerName" name="secondOwnerName" placeholder="Enter second owner name">
                </div>
            </div>
        
            <!-- NPI Number and PIC Driver License/ID -->
            <div class="form-group-container">
                <div class="form-group">
                    <label for="npiNumber">*NPI Number</label>
                    <input type="text" id="npiNumber" name="npiNumber" placeholder="Enter NPI Number" required>
                </div>
                <div class="form-group">
                    <label for="picDriverLicense">*PIC Driver License/ID</label>
                    <input type="file" id="picDriverLicense" name="picDriverLicense" accept=".pdf, .jpg, .jpeg, .png" required>
                </div>
            </div>
        
            <!-- State License and DEA License -->
            <div class="form-group-container">
                <div class="form-group">
                    <label for="stateLicenseNumber">*State License Number</label>
                    <input type="text" id="stateLicenseNumber" name="stateLicenseNumber" placeholder="Enter State License Number" required>
                </div>
                <div class="form-group">
                    <label for="deaLicenseNumber">*DEA License Number</label>
                    <input type="text" id="deaLicenseNumber" name="deaLicenseNumber" placeholder="Enter DEA License Number" required>
                </div>
            </div>
            <div class="form-group-container">
                <div class="form-group">
                    <label for="stateLicenseUpload">*Upload State License</label>
                    <input type="file" id="stateLicenseUpload" name="stateLicenseUpload" accept=".pdf, .jpg, .jpeg, .png" required>
                </div>
                <div class="form-group">
                    <label for="deaLicenseUpload">*Upload DEA License</label>
                    <input type="file" id="deaLicenseUpload" name="deaLicenseUpload" accept=".pdf, .jpg, .jpeg, .png" required>
                </div>
            </div>
        
            <!-- Signature Section -->
            <div class="form-group-container">
                <div class="form-group">
                    <label for="signature">*Signature</label>
                    <input type="text" id="signature" name="signature" placeholder="Type your full name" required>
                </div>
                <div class="form-group">
                    <label for="signatureDate">*Date</label>
                    <input type="date" id="signatureDate" name="signatureDate" required>
                </div>
            </div>
        
            <!-- Mandatory Checkboxes -->
            <div class="form-group-container">
                <div class="d-flex">
                    <input type="checkbox" style="width:18px; margin-right: 6px;" id="agreeTerms" name="agreeTerms" required>
                    <label for="agreeTerms">I have read and agree to the <a href="terms_and_conditions.pdf" target="_blank">Terms and Conditions</a>.</label>
                </div>
                <div class="d-flex">
                    <input type="checkbox" style="width:18px; margin-right: 6px;" id="agreeText" name="agreeText" required>
                    <label for="agreeText">I agree to receive text messages about my order.</label>
                </div>
            </div>
        
            <!-- Submit Button -->
            <button type="submit" id="submitButton">Submit</button>
        </form>
    </div>

    <!-- Bootstrap Modal for Show complete status -->
    <div class="modal fade" id="progressModal" tabindex="-1" aria-labelledby="progressModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="progressModalLabel">Form Status</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <!-- Message will be dynamically inserted here -->
                     <p style="font-size: 22px;">Submitting...</p>
                </div>
                <div class="modal-footer" style="border: 0;">
                    <button type="button " class="btn btn-secondary cbtn" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap Modal for Show sending  status -->
    <div class="modal fade" id="confirmationModal" tabindex="-1" aria-labelledby="confirmationModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmationModalLabel">Confirmation</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- Message will be dynamically inserted here -->
                </div>
                <div class="modal-footer" style="border: 0;">
                    <button type="button " class="btn btn-secondary cbtn" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

    <script>
        const form = document.getElementById('registrationForm');
        const submitButton = document.getElementById('submitButton');
        const modalBody = document.getElementById('modalBody');
        const confirmationModal = new bootstrap.Modal(document.getElementById('confirmationModal'));
        const progressModal = new bootstrap.Modal(document.getElementById('progressModal'));

        form.addEventListener('submit', async function (event) {
            event.preventDefault(); // Prevent the form from submitting the traditional way
            console.log("Senging form data")

            // Perform form validation
            if (!form.checkValidity()) {
                alert('Please fill out all required fields correctly.');
                return;
            }

            // Change button text to "Sending..."
            progressModal.show();

            // submitButton.textContent = 'Sending...';
            submitButton.disabled = true;

            try {
                // Prepare form data
                const formData = new FormData(form);
                
                

                // Send form data to the API
                const response = await fetch('https://shrouded-inlet-35531-a1fa52923995.herokuapp.com/submit-registration', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();
                console.log(result);

                if (response.ok) {
                    // Show success message in modal
                    modalBody.textContent = 'Registration successful and email sent!';
                    modalBody.style.color = 'green';
                } else {
                    // Show error message in modal
                    modalBody.textContent = result.error || 'An error occurred. Please try again.';
                    modalBody.style.color = 'red';
                }
            } catch (error) {
                // Show error message in modal
                modalBody.textContent = 'An error occurred. Please try again.';
                modalBody.style.color = 'red';
            } finally {
                // Reset button text and enable it
                submitButton.textContent = 'Submit';
                submitButton.disabled = false;

                // Show the modal
                console.log("Sent the form data")
                progressModal.hide();
                confirmationModal.show();
            }
        });

        // Handle the billing same as shipping toggle
        const billingSameAsShipping = document.getElementById('billingSameAsShipping');
        const billingFields = document.getElementById('billingFields');

        billingSameAsShipping.addEventListener('change', function () {
            if (this.value === 'yes') {
                billingFields.style.display = 'none';
            } else {
                billingFields.style.display = 'flex';
            }
        });

        // Initialize state on page load
        if (billingSameAsShipping.value === 'yes') {
            billingFields.style.display = 'none';
        }
    </script>
</body>

</html>
